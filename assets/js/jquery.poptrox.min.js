/* jquery.poptrox.js v2.5.2-dev | (c) n33 | n33.co | MIT licensed */
!function(e){e.fn.poptrox_disableSelection=function(){return e(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},e.fn.poptrox=function(o){function t(){n=e(window).width(),a=e(window).height()+l.windowHeightPad;var o=Math.abs(p.width()-p.outerWidth()),t=Math.abs(p.height()-p.outerHeight()),i=(b.width(),b.height(),n-2*l.windowMargin-o),s=a-2*l.windowMargin-t;p.css("min-width",l.popupWidth).css("min-height",l.popupHeight),w.children().css("max-width",i).css("max-height",s)}if(0==this.length)return e(this);if(this.length>1){for(var p,i,s,r=0;r<this.length;r++)e(this[r]).poptrox(o);return e(this)}var n,a,l=e.extend({preload:!1,baseZIndex:1e3,fadeSpeed:300,overlayColor:"#000000",overlayOpacity:.6,overlayClass:"poptrox-overlay",windowMargin:50,windowHeightPad:0,selector:"a",caption:null,parent:"body",popupSpeed:300,popupWidth:200,popupHeight:100,popupIsFixed:!1,useBodyOverflow:!1,usePopupEasyClose:!0,usePopupForceClose:!1,usePopupLoader:!0,usePopupCloser:!0,usePopupCaption:!1,usePopupNav:!1,usePopupDefaultStyling:!0,popupBackgroundColor:"#FFFFFF",popupTextColor:"#000000",popupLoaderTextSize:"2em",popupCloserBackgroundColor:"#000000",popupCloserTextColor:"#FFFFFF",popupCloserTextSize:"20px",popupPadding:10,popupCaptionHeight:60,popupCaptionTextSize:null,popupBlankCaptionText:"(untitled)",popupCloserText:"&#215;",popupLoaderText:"&bull;&bull;&bull;&bull;",popupClass:"poptrox-popup",popupSelector:null,popupLoaderSelector:".loader",popupCloserSelector:".closer",popupCaptionSelector:".caption",popupNavPreviousSelector:".nav-previous",popupNavNextSelector:".nav-next",onPopupClose:null,onPopupOpen:null},o),u=e(this),d=e("body"),h=e('<div class="'+l.overlayClass+'"></div>'),g=e(window),$=[],f=0,x=!1,v=[];l.usePopupLoader||(l.popupLoaderSelector=null),l.usePopupCloser||(l.popupCloserSelector=null),l.usePopupCaption||(l.popupCaptionSelector=null),l.usePopupNav||(l.popupNavPreviousSelector=null,l.popupNavNextSelector=null);var w=(p=e(l.popupSelector?l.popupSelector:'<div class="'+l.popupClass+'">'+(l.popupLoaderSelector?'<div class="loader">'+l.popupLoaderText+"</div>":"")+'<div class="pic"></div>'+(l.popupCaptionSelector?'<div class="caption"></div>':"")+(l.popupCloserSelector?'<span class="closer">'+l.popupCloserText+"</span>":"")+(l.popupNavPreviousSelector?'<div class="nav-previous"></div>':"")+(l.popupNavNextSelector?'<div class="nav-next"></div>':"")+"</div>")).find(".pic"),b=e(),m=p.find(l.popupLoaderSelector),_=p.find(l.popupCaptionSelector),C=p.find(l.popupCloserSelector),S=p.find(l.popupNavNextSelector),y=p.find(l.popupNavPreviousSelector),P=S.add(y);return l.usePopupDefaultStyling&&(p.css("background",l.popupBackgroundColor).css("color",l.popupTextColor).css("padding",l.popupPadding+"px"),_.length>0&&(p.css("padding-bottom",l.popupCaptionHeight+"px"),_.css("position","absolute").css("left","0").css("bottom","0").css("width","100%").css("text-align","center").css("height",l.popupCaptionHeight+"px").css("line-height",l.popupCaptionHeight+"px"),l.popupCaptionTextSize&&_.css("font-size",popupCaptionTextSize)),C.length>0&&C.html(l.popupCloserText).css("font-size",l.popupCloserTextSize).css("background",l.popupCloserBackgroundColor).css("color",l.popupCloserTextColor).css("display","block").css("width","40px").css("height","40px").css("line-height","40px").css("text-align","center").css("position","absolute").css("text-decoration","none").css("outline","0").css("top","0").css("right","-40px"),m.length>0&&m.html("").css("position","relative").css("font-size",l.popupLoaderTextSize).on("startSpinning",function(o){var t=e("<div>"+l.popupLoaderText+"</div>");t.css("height",Math.floor(l.popupHeight/2)+"px").css("overflow","hidden").css("line-height",Math.floor(l.popupHeight/2)+"px").css("text-align","center").css("margin-top",Math.floor((p.height()-t.height()+(_.length>0?_.height():0))/2)).css("color",l.popupTextColor?l.popupTextColor:"").on("xfin",function(){t.fadeTo(300,.5,function(){t.trigger("xfout")})}).on("xfout",function(){t.fadeTo(300,.05,function(){t.trigger("xfin")})}).trigger("xfin"),m.append(t)}).on("stopSpinning",function(e){m.find("div").remove()}),2==P.length)&&(P.css("font-size","75px").css("text-align","center").css("color","#fff").css("text-shadow","none").css("height","100%").css("position","absolute").css("top","0").css("opacity","0.35").css("cursor","pointer").css("box-shadow","inset 0px 0px 10px 0px rgba(0,0,0,0)").poptrox_disableSelection(),l.usePopupEasyClose?(i="100px",s="100px"):(i="75%",s="25%"),S.css("right","0").css("width",i).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; right: 0; margin-top: -50px;">&gt;</div>'),y.css("left","0").css("width",s).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; left: 0; margin-top: -50px;">&lt;</div>')),g.on("resize orientationchange",function(){t()}),_.on("update",function(e,o){o&&0!=o.length||(o=l.popupBlankCaptionText),_.html(o)}),C.css("cursor","pointer").on("click",function(e){return e.preventDefault(),e.stopPropagation(),p.trigger("poptrox_close"),!0}),S.on("click",function(e){e.stopPropagation(),e.preventDefault(),p.trigger("poptrox_next")}),y.on("click",function(e){e.stopPropagation(),e.preventDefault(),p.trigger("poptrox_previous")}),h.css("position","fixed").css("left",0).css("top",0).css("z-index",l.baseZIndex).css("width","100%").css("height","100%").css("text-align","center").css("cursor","pointer").appendTo(l.parent).prepend('<div style="display:inline-block;height:100%;vertical-align:middle;"></div>').append('<div style="position:absolute;left:0;top:0;width:100%;height:100%;background:'+l.overlayColor+";opacity:"+l.overlayOpacity+";filter:alpha(opacity="+100*l.overlayOpacity+');"></div>').hide().on("touchmove",function(e){return!1}).on("click",function(e){e.preventDefault(),e.stopPropagation(),p.trigger("poptrox_close")}),p.css("display","inline-block").css("vertical-align","middle").css("position","relative").css("z-index",1).css("cursor","auto").appendTo(h).hide().on("poptrox_next",function(){var e=f+1;e>=$.length&&(e=0),p.trigger("poptrox_switch",[e])}).on("poptrox_previous",function(){var e=f-1;0>e&&(e=$.length-1),p.trigger("poptrox_switch",[e])}).on("poptrox_reset",function(){t(),p.data("width",l.popupWidth).data("height",l.popupHeight),m.hide().trigger("stopSpinning"),_.hide(),C.hide(),P.hide(),w.hide(),b.attr("src","").detach()}).on("poptrox_open",function(e,o){return!!x||(x=!0,l.useBodyOverflow&&d.css("overflow","hidden"),l.onPopupOpen&&l.onPopupOpen(),p.addClass("loading"),void h.fadeTo(l.fadeSpeed,1,function(){p.trigger("poptrox_switch",[o,!0])}))}).on("poptrox_switch",function(o,i,s){var r,n,a;if(!s&&x)return!0;x=!0,p.addClass("loading").css("width",p.data("width")).css("height",p.data("height")),_.hide(),b.attr("src")&&b.attr("src",""),b.detach(),(b=(r=$[i]).object).off("load"),w.css("text-indent","-9999px").show().append(b),"ajax"==r.type?e.get(r.src,function(e){b.html(e),b.trigger("load")}):b.attr("src",r.src),"image"!=r.type&&(n=r.width,a=r.height,"%"==n.slice(-1)&&(n=parseInt(n.substring(0,n.length-1))/100*g.width()),"%"==a.slice(-1)&&(a=parseInt(a.substring(0,a.length-1))/100*g.height()),b.css("position","relative").css("outline","0").css("z-index",l.baseZIndex+100).width(n).height(a)),m.trigger("startSpinning").fadeIn(300),p.show(),l.popupIsFixed?(p.removeClass("loading").width(l.popupWidth).height(l.popupHeight),b.load(function(){b.off("load"),m.hide().trigger("stopSpinning"),_.trigger("update",[r.captionText]).fadeIn(l.fadeSpeed),C.fadeIn(l.fadeSpeed),w.css("text-indent",0).hide().fadeIn(l.fadeSpeed,function(){x=!1}),f=i,P.fadeIn(l.fadeSpeed)})):b.load(function(){t(),b.off("load"),m.hide().trigger("stopSpinning");var e=b.width(),o=b.height(),s=function(){_.trigger("update",[r.captionText]).fadeIn(l.fadeSpeed),C.fadeIn(l.fadeSpeed),w.css("text-indent",0).hide().fadeIn(l.fadeSpeed,function(){x=!1}),f=i,P.fadeIn(l.fadeSpeed),p.removeClass("loading").data("width",e).data("height",o).css("width","auto").css("height","auto")};e==p.data("width")&&o==p.data("height")?s():p.animate({width:e,height:o},l.popupSpeed,"swing",s)}),"image"!=r.type&&b.trigger("load")}).on("poptrox_close",function(){return!!x&&!l.usePopupForceClose||(x=!0,p.hide().trigger("poptrox_reset"),l.onPopupClose&&l.onPopupClose(),void h.fadeOut(l.fadeSpeed,function(){l.useBodyOverflow&&d.css("overflow","auto"),x=!1}))}).trigger("poptrox_reset"),l.usePopupEasyClose?(_.on("click","a",function(e){e.stopPropagation()}),p.css("cursor","pointer").on("click",function(e){e.stopPropagation(),e.preventDefault(),p.trigger("poptrox_close")})):p.on("click",function(e){e.stopPropagation()}),g.keydown(function(e){if(p.is(":visible"))switch(e.keyCode){case 37:case 32:if(l.usePopupNav)return p.trigger("poptrox_previous"),!1;break;case 39:if(l.usePopupNav)return p.trigger("poptrox_next"),!1;break;case 27:return p.trigger("poptrox_close"),!1}}),u.find(l.selector).each(function(o){var t,i,s,r=e(this),n=r.find("img"),a=r.data("poptrox");if("ignore"!=a&&r.attr("href")){if((i={src:r.attr("href"),captionText:n.attr("title"),width:null,height:null,type:null,object:null,options:null},l.caption)?"function"==typeof l.caption?c=l.caption(r):"selector"in l.caption&&(t=r.find(l.caption.selector),"attribute"in l.caption?c=t.attr(l.caption.attribute):(c=t.html(),!0===l.caption.remove&&t.remove())):c=n.attr("title"),i.captionText=c,a){var u=a.split(",");0 in u&&(i.type=u[0]),1 in u&&(s=u[1].match(/([0-9%]+)x([0-9%]+)/))&&3==s.length&&(i.width=s[1],i.height=s[2]),2 in u&&(i.options=u[2])}if(!i.type)switch((s=i.src.match(/\/\/([a-z0-9\.]+)\/.*/))&&!(s.length<2)||(s=[!1]),s[1]){case"api.soundcloud.com":i.type="soundcloud";break;case"youtu.be":i.type="youtube";break;case"vimeo.com":i.type="vimeo";break;case"wistia.net":i.type="wistia";break;case"bcove.me":i.type="bcove";break;default:i.type="image"}switch(s=i.src.match(/\/\/[a-z0-9\.]+\/(.*)/),i.type){case"iframe":i.object=e('<iframe src="" frameborder="0"></iframe>'),i.object.on("click",function(e){e.stopPropagation()}).css("cursor","auto"),i.width&&i.height||(i.width="600",i.height="400");break;case"ajax":i.object=e('<div class="poptrox-ajax"></div>'),i.object.on("click",function(e){e.stopPropagation()}).css("cursor","auto").css("overflow","auto"),i.width&&i.height||(i.width="600",i.height="400");break;case"soundcloud":i.object=e('<iframe scrolling="no" frameborder="no" src=""></iframe>'),i.src="//w.soundcloud.com/player/?url="+escape(i.src)+(i.options?"&"+i.options:""),i.width="600",i.height="166";break;case"youtube":i.object=e('<iframe src="" frameborder="0" allowfullscreen="1"></iframe>'),i.src="//www.youtube.com/embed/"+s[1]+(i.options?"?"+i.options:""),i.width&&i.height||(i.width="800",i.height="480");break;case"vimeo":i.object=e('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),i.src="//player.vimeo.com/video/"+s[1]+(i.options?"?"+i.options:""),i.width&&i.height||(i.width="800",i.height="480");break;case"wistia":i.object=e('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),i.src="//fast.wistia.net/"+s[1]+(i.options?"?"+i.options:""),i.width&&i.height||(i.width="800",i.height="480");break;case"bcove":i.object=e('<iframe src="" frameborder="0" allowFullScreen="1" width="100%"></iframe>'),i.src="//bcove.me/"+s[1]+(i.options?"?"+i.options:""),i.width&&i.height||(i.width="640",i.height="360");break;default:if(i.object=e('<img src="" alt="" style="vertical-align:bottom" />'),l.preload){var s=document.createElement("img");s.src=i.src,v.push(s)}i.width=r.attr("width"),i.height=r.attr("height")}"file:"==window.location.protocol&&i.src.match(/^\/\//)&&(i.src="http:"+i.src),$.push(i),n.removeAttr("title"),r.removeAttr("href").css("cursor","pointer").css("outline",0).on("click",function(e){e.preventDefault(),e.stopPropagation(),p.trigger("poptrox_open",[o])})}}),u.prop("_poptrox",l),u}}(jQuery);
